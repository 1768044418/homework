<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<link rel="stylesheet" type="text/css" href="css/win.css"/>
		
	</head>
	<body>
         
         <div id="body">
             <div id="tips">
                 请选择
             </div>
             
             <div id="imgs">
                 <img src="img/b2.png" onclick="jianDao()" id="jiandao" class="img1"/>
                 <img src="img/b0.png" onclick="shiTou()"  id="shitou" class="img1"/>
                 <img src="img/b1.png" onclick="bu()" 	  id="bu"	 class="img1"/>
             </div>
             
             <div id="jieguo">
                 <div class="jieguo">
                     <div>您选择了</div>
                     <img src="img/Snip20170413_59.png" id="myImg" />
                 </div>
                 
                 <div class="pk">PK</div>
                 
                 <div class="jieguo">
                     <div>人机选择了</div>
                     <img src="img/Snip20170413_59.png" id="computer" />
                 </div>
             </div>
             
             <div id="score">
                 等待结果中....
             </div>
             
             <div id="scoreFen">
                 <span>00</span>：<span>00</span>
             </div>
         </div>
		 <script type="text/javascript">
		 	var jiandao = document.getElementById("jiandao");
		 	var shitou = document.getElementById("shitou");
		 	var bu = document.getElementById("bu");
		 	var myImg = document.getElementById("myImg");
		 	var computer = document.getElementById("computer");
		 	var score = document.getElementById("score");
		 	var scoreFen = document.getElementById("scoreFen");
		 	
		 	var myScore=0,comScore=0;
		 	
		 	var imgs = ["img/b2.png","img/b0.png","img/b1.png"];
		 	console.log(imgs[0]);
		 	jiandao.onclick = function(){
		 		var imgSrc = jiandao.getAttribute("src");
		 	
		 		myImg.setAttribute("src",imgSrc);
		 		checkImg(imgSrc);
		 	}
		 	
		 	shitou.onclick = function(){
		 		var imgSrc = shitou.getAttribute("src");
		 		myImg.setAttribute("src",imgSrc);
		 		checkImg(imgSrc);
		 	}
		 
		 bu.onclick = function(){
		 	var imgSrc = bu.getAttribute("src");
		 	myImg.setAttribute("src",imgSrc);
		 	checkImg(imgSrc);
		 }
		 
		 
		 function checkImg(imgSrc){
		 	var myIndex = imgs.indexOf(imgSrc);
		 	var intervalId = setInterval(function(){
		 		var num = parseInt(Math.random()*3);
		 		computer.setAttribute("src",imgs[num]);
		 
		 	},20);
		 	
		 	setTimeout(function(){
		 		clearInterval(intervalId);
		 		var comSrc = computer.getAttribute("src");
		 		var comIndex = imgs.indexOf(comSrc);
		 		if(myIndex==comIndex){
		 			score.innerHTML = "平局！再战一轮吧！";
		 		}else if(myIndex==0&&comIndex==2
		 				|| myIndex==1&&comIndex==0
		 				|| myIndex==2&&comIndex==1){
		 			score.innerHTML = "赢啦！继续虐他吧！";
		 			myScore++;
		 		}else{
		 			score.innerHTML = "输啦！继续努力吧！";
		 			comScore++;
		 		}
		 		myScore = (myScore+"").length<2?"0"+myScore:myScore+"";
		 		comScore = (comScore+"").length<2?"0"+comScore:comScore+"";
		 		
		 		scoreFen.firstElementChild.innerHTML = myScore;
		 		scoreFen.lastElementChild.innerHTML = comScore;
		 		
		 	},400);
		 }
		 	</script>
 </body>
</html>
